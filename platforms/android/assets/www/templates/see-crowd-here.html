<div ng-controller="seeCrowdHereController">
    <ons-page>
        <ons-toolbar>
            <div class="center">
                <input ng-model="searchInput" ng-change="searchInputChange(searchInput)" type="text" class="search-input" style="height: 100%; width:100%; border-radius: 0px;" placeholder="{{$root.lang.SEE_CROWD_MENU.SEARCH_HERE}}" />
            </div>
        </ons-toolbar>
        <div ng-if="!crowds" style="height: 100%;">
            <button class="refresh-button button button--quiet" ng-click="checkLocation()">{{$root.lang.SEE_CROWD_MENU.NO_LOCATION}}</button>
        </div>
        <div ng-if="crowds && crowds !== 'pending' && crowds.length === 0" style="height: 100%;">
            <button class="refresh-button button button--quiet" onclick="menu.setMainPage('templates/set-crowd.html')">{{$root.lang.SEE_CROWD_MENU.NO_PLACE}}</button>
        </div>
        <div ng-if="crowds && crowds !== 'pending' && crowds.length > 0">
            <ons-list ons-lazy-repeat="MyDelegate">
                <ons-list-item modifier="chevron" ng-click="selectPlaceBasedCrowd(item);" ng-if="$root.settings.isCustomPlacesEnabled === true || item.source !== 'custom'">
                    <ons-row align="center">
                        <ons-col width="40px" class="crowd-date">
                            {{item.lastUpdatePass}} {{$root.lang.SEE_CROWD_MENU.MIN_AGO}}
                        </ons-col>
                        <ons-col class="crowd-name">
                            <img ng-src="img/sources/{{item.placeSource}}.png" /> {{item.placeName}}
                        </ons-col>
                        <ons-col width="40px" class="crowd-average-value">
                            <div class="c100 p{{item.crowdLast}} crowd-size center">
                                <div class="slice">
                                    <div class="bar"></div>
                                    <div class="fill"></div>
                                </div>
                            </div>
                        </ons-col>
                        <ons-col width="40px" class="crowd-last-value">
                            <div class="c100 p{{item.crowdAverage}} crowd-size center">
                                <div class="slice">
                                    <div class="bar"></div>
                                    <div class="fill"></div>
                                </div>
                            </div>
                        </ons-col>
                    </ons-row>
                </ons-list-item>
            </ons-list>
        </div>
    </ons-page>
</div>
