<div ng-controller="setCrowdController">
    <ons-navigator var="app.navi">
        <ons-page>
            <ons-toolbar>
                <div class="left">
                    <ons-toolbar-button ng-click="menu.toggle()">
                        <ons-icon icon="fa-bars"></ons-icon>
                    </ons-toolbar-button>
                </div>
                <div class="center">{{$root.lang.MAIN_MENU.SET_CROWD}}</div>
            </ons-toolbar>

            <button ng-if="!nearbyPlaces" class="refresh-button button button--quiet">{{$root.lang.SET_CROWD_MENU.NO_LOCATION}}</button>
            <div ng-if="nearbyPlaces === 'pending'" style="text-align: center; padding-top: 100px;">
                <!-- <ons-progress-circular indeterminate></ons-progress-circular> -->
                <img src="img/loading.gif"/>
            </div>
            <div ng-if="nearbyPlaces && nearbyPlaces !== 'pending'" style="height: 100%;">
                <button ng-if="nearbyPlaces.length === 0" class="refresh-button button button--quiet" ng-click="selectPlace()">{{$root.lang.SET_CROWD_MENU.NO_PLACE}}</button>
                <div ng-if="nearbyPlaces.length > 0">
                    <ons-list>
                        <ons-list-item ng-repeat="place in nearbyPlaces" ng-if="$root.settings.isCustomPlacesEnabled === true || place.source !== 'custom'" ng-click="selectPlace(place)">
                            <div class="crowd-name">
                                <img ng-src="img/sources/{{place.source}}.png" /> {{place.name}}
                            </div>
                        </ons-list-item>
                    </ons-list>
                </div>
            </div>
            <ons-bottom-toolbar ng-if="$root.settings.isCustomPlacesEnabled === true && nearbyPlaces && nearbyPlaces !== 'pending'">
                <div class="tab-bar">
                    <label class="tab-bar__item" ng-click="selectPlace()">
                        <input type="radio" name="tab-bar-c" checked="checked">
                        <button class="tab-bar__button">
                            <div class="tab-bar__label">{{$root.lang.SET_CROWD_MENU.ENTER_CUSTOM_PLACE}}</div>
                        </button>
                    </label>
                </div>
            </ons-bottom-toolbar>
        </ons-page>
    </ons-navigator>
</div>
